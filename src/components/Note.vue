<template>
  <div>
    <el-button type="text" @click="dialogVisible = true">
      <el-card class="box-card" :class="color">
        <div>
          <h1 class="title">{{ note.title }}</h1>
          <p>{{ note.content }}</p>
        </div>
      </el-card>
    </el-button>
    <el-dialog
      :title="note.title"
      :visible.sync="dialogVisible"
      width="350px"
      class="wrapper"
      :show-close="false"
    >
      <el-input
        type="textarea"
        :rows="10"
        v-model="content"
      >
        Hello world
      </el-input>
      <span slot="footer" class="dialog-footer">
        <div>
          <svg
            t="1621385708953"
            @click="deleteNote(note.id)"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3986"
            width="20"
            height="20"
          >
            <path
              d="M395.438773 224.134757l226.047316 0c19.811208 0 30.855752-17.633612 30.855752-39.417755l0-16.879436c0-21.766746-11.044544-39.426965-30.855752-39.426965L395.438773 128.410602c-19.811208 0-35.871999 17.660218-35.871999 39.426965l0 16.879436C359.56575 206.500121 375.626541 224.134757 395.438773 224.134757L395.438773 224.134757zM715.622072 239.893672 315.780525 239.893672c-108.967784 0-124.953873 8.407484-124.953873 114.381074l57.462736-0.026606 0 0.026606 520.515954 0 0-0.300852 58.738799-0.029676C827.539025 247.975744 824.593949 239.893672 715.622072 239.893672L715.622072 239.893672zM248.288364 748.975203c0 154.142659 54.809303 146.553821 161.306826 146.553821l263.794012 0c68.061119-6.606465 95.415117-8.004301 95.415117-162.14696L768.804319 410.448116 248.288364 410.448116 248.288364 748.975203 248.288364 748.975203zM595.106278 481.142202c0-20.74651 12.93152-37.565571 28.874631-37.565571 15.957437 0 28.888957 16.820084 28.888957 37.565571l0 318.27381c0 20.7373-12.932544 37.552268-28.888957 37.552268-15.943111 0-28.874631-16.815991-28.874631-37.552268L595.106278 481.142202 595.106278 481.142202zM479.595474 481.142202c0-20.74651 12.929474-37.565571 28.885887-37.565571 15.945157 0 28.871561 16.820084 28.871561 37.565571l0 318.27381c0 20.7373-12.926404 37.552268-28.871561 37.552268-15.95539 0-28.885887-16.815991-28.885887-37.552268L479.595474 481.142202 479.595474 481.142202zM364.089787 481.142202c0-20.74651 12.926404-37.565571 28.870538-37.565571 15.95232 0 28.875654 16.820084 28.875654 37.565571l0 318.27381c0 20.7373-12.922311 37.552268-28.875654 37.552268-15.944134 0-28.870538-16.815991-28.870538-37.552268L364.089787 481.142202 364.089787 481.142202zM364.089787 481.142202"
              p-id="3987"
            ></path>
          </svg>

          <el-popover
            placement="top-start"
            width="50"
            trigger="hover"
            ><Colors :id="note.id" @getColor="getColor" />

            <svg
              t="1621385428454"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2512"
              width="20"
              height="20"
              slot="reference"
            >
              <path
                d="M503.466667 981.333333A467.2 467.2 0 0 1 42.666667 520.533333C38.4 273.066667 228.266667 64 475.733333 44.8h12.8c51.2-2.133333 98.133333 14.933333 134.4 49.066667C661.333333 130.133333 682.666667 181.333333 682.666667 234.666667c0 6.4 0 12.8 2.133333 19.2 6.4 42.666667 42.666667 78.933333 85.333333 85.333333 6.4 2.133333 12.8 2.133333 19.2 2.133333 53.333333 0 104.533333 21.333333 140.8 59.733334 34.133333 36.266667 53.333333 83.2 49.066667 134.4v12.8C962.133333 791.466667 757.333333 981.333333 512 981.333333h-8.533333z m-21.333334-851.2C283.733333 145.066667 123.733333 320 128 518.4 132.266667 725.333333 296.533333 891.733333 505.6 896c200.533333 2.133333 373.333333-155.733333 390.4-354.133333v-10.666667c2.133333-25.6-8.533333-51.2-25.6-70.4-19.2-21.333333-49.066667-32-78.933333-32-10.666667 0-23.466667 0-34.133334-2.133333-78.933333-12.8-142.933333-76.8-155.733333-155.733334-4.266667-14.933333-4.266667-25.6-4.266667-36.266666 0-29.866667-12.8-59.733333-32-78.933334-19.2-17.066667-42.666667-27.733333-66.133333-27.733333h-4.266667c-4.266667 0-8.533333 0-12.8 2.133333zM426.666667 405.333333c-46.933333 0-85.333333-38.4-85.333334-85.333333s38.4-85.333333 85.333334-85.333333 85.333333 38.4 85.333333 85.333333-38.4 85.333333-85.333333 85.333333z m-21.333334 234.666667c36.266667 0 64 27.733333 64 64s-27.733333 64-64 64-64-27.733333-64-64 27.733333-64 64-64z m-106.666666-53.333333c-36.266667 0-64-27.733333-64-64s27.733333-64 64-64 64 27.733333 64 64-27.733333 64-64 64z"
                fill=""
                p-id="2513"
              ></path>
            </svg>
          </el-popover>
        </div>
        <div>
          <svg
            @click="dialogVisible = false"
            t="1621386377912"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="4780"
            width="20"
            height="20"
          >
            <path
              d="M810.666667 273.493333L750.506667 213.333333 512 451.84 273.493333 213.333333 213.333333 273.493333 451.84 512 213.333333 750.506667 273.493333 810.666667 512 572.16 750.506667 810.666667 810.666667 750.506667 572.16 512z"
              p-id="4781"
            ></path>
          </svg>

          <svg
            @click="save(note.id)"
            t="1621386452450"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5746"
            width="20"
            height="20"
          >
            <path
              d="M166.016 64A102.4 102.4 0 0 0 64 166.016v627.968A102.4 102.4 0 0 0 166.016 896h627.968A102.4 102.4 0 0 0 896 793.984V258.752L701.248 64z m0 64H192v192c0 35.008 28.992 64 64 64h384c35.008 0 64-28.992 64-64V157.248l128 128v508.8a37.504 37.504 0 0 1-38.016 37.952H704v-192c0-35.008-28.992-64-64-64H320c-35.008 0-64 28.992-64 64v192H166.016A37.504 37.504 0 0 1 128 793.984V166.016C128 144.512 144.512 128 166.016 128zM256 128h192v128h128V128h64v192H256z m64 512h320v192H320z"
              fill=""
              p-id="5747"
            ></path>
          </svg>
        </div>
      </span>
    </el-dialog>
  </div>
</template>

<script>
//props 传递一个颜色信息过来子组件，子组件根据这个信息来决定背景色
//

import Colors from "./Colors.vue";
export default {
  props: {
    note: {
      type: Object,
    },
  },
  components: {
    Colors,
  },
  data() {
    return {
      dialogVisible: false,
      visible: false,
      content: this.note.content,
      color: this.note.color,
    };
  },
  methods: {
    save(id) {
      this.dialogVisible = false;

      this.$store.commit("editNote", {
        id: id,
        content: this.content,
        color: this.color,
      });
    },
    deleteNote(id) {
      this.$store.commit("deleteNote", id);
    },
    getColor(color) {
      this.color = color;
    },
  },
  computed: {},
  created() {},
};
</script>

<style lang="scss" scoped>
.box-card {
  min-width: 220px;
  padding: 10px;
  min-height: 220px;
  &:hover {
    box-shadow: 1px 5px 5px 10px rgb(158, 158, 158, 0.2);
  }
}

.dialog-footer {
  display: flex;
  justify-content: space-between;
}

.title {
  margin-bottom: 10px;
}

.el-dialog {
  min-width: 380px;
}

.default {
  border: 1px solid rgba(128, 128, 128, 0.303);
  margin: 5px 8px;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  background: white;
}
.red {
  border: none;
  background: #f44336;
}
.orange {
  border: none;
  background: #ff9800;
}
.blue {
  border: none;
  background: #2196f3;
}
.green {
  border: none;
  background: #4caf50;
}

.skyblue {
  border: none;
  background: #a8e0ff;
}

.purple {
  border: none;
  background: #e1bee7;
}

.yellow {
  border: none;
  background: #ffff8d;
}
.icon {
  cursor: pointer;
  margin-right: 10px;
  color: white;
}
</style>
